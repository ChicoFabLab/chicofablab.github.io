{% comment %}
SEO Meta Tags Include
Generates meta description, Open Graph, and Twitter Card tags
{% endcomment %}

{% comment %} Get page description {% endcomment %}
{% if page.description %}
  {% assign page_desc = page.description %}
{% elsif page.excerpt %}
  {% assign page_desc = page.excerpt | strip_html | strip | truncate: 160 %}
{% elsif page.content %}
  {% assign page_desc = page.content | strip_html | strip | truncate: 160 %}
{% else %}
  {% assign page_desc = site.description | default: "Community makerspace wiki for Chico Fab Lab - tools, projects, and resources" %}
{% endif %}

{% comment %} Get page title {% endcomment %}
{% if page.title %}
  {% assign page_title = page.title | append: " - " | append: site.title %}
{% else %}
  {% assign page_title = site.title %}
{% endif %}

{% comment %} Get page URL {% endcomment %}
{% if page.url %}
  {% assign page_url = page.url | prepend: site.url | prepend: site.baseurl %}
{% else %}
  {% assign page_url = site.url | append: site.baseurl %}
{% endif %}

{% comment %} Get page image (use site logo as fallback) {% endcomment %}
{% if page.image %}
  {% assign page_image = page.image | prepend: site.baseurl | prepend: site.url %}
{% else %}
  {% assign page_image = site.url | append: site.baseurl | append: "/assets/img/chicofablab_logo.webp" %}
{% endif %}

{% comment %} Meta Description {% endcomment %}
<meta name="description" content="{{ page_desc | escape }}">

{% comment %} Open Graph Tags {% endcomment %}
<meta property="og:title" content="{{ page_title | escape }}">
<meta property="og:description" content="{{ page_desc | escape }}">
<meta property="og:image" content="{{ page_image }}">
<meta property="og:url" content="{{ page_url }}">
<meta property="og:type" content="{% if page.layout == 'default' %}website{% else %}article{% endif %}">
<meta property="og:site_name" content="{{ site.title }}">

{% comment %} Twitter Card Tags {% endcomment %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page_title | escape }}">
<meta name="twitter:description" content="{{ page_desc | escape }}">
<meta name="twitter:image" content="{{ page_image }}">

{% comment %} Canonical URL {% endcomment %}
<link rel="canonical" href="{{ page_url }}">
