<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}CFL Wiki</title>
    {% include seo.html %}
    <link rel="icon" href="{{ site.baseurl }}/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Core fonts: Always loaded (Inter for UI, JetBrains Mono for code) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Optional fonts: Lazy loaded via assets/js/fonts.js when user opens settings -->
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Settings Drawer -->
    <div class="cfl-drawer__backdrop" id="cfl-drawer-backdrop" data-open="false"></div>
    <div class="cfl-drawer" id="cfl-drawer" data-open="false" role="dialog" aria-label="Settings">
        <div class="cfl-drawer__header">
            <span class="cfl-drawer__title">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
                Settings
            </span>
            <button type="button" class="cfl-drawer__close" id="cfl-drawer-close" aria-label="Close settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div class="cfl-drawer__body">
            <div class="cfl-drawer__section">
                <div class="cfl-drawer__section-title">Appearance</div>
                <button class="cfl-drawer__option dark-mode-toggle" id="cfl-dark-mode-toggle" type="button">
                    <span class="cfl-drawer__option-label">Dark Mode</span>
                    <span class="dark-mode-toggle__icon" aria-hidden="true"></span>
                </button>
            </div>
            <div class="cfl-drawer__section">
                <div class="cfl-drawer__section-title">Typography</div>
                <select class="cfl-drawer__select" id="cfl-drawer-font-select">
                    <option value="default">Default (Georgia + Inter)</option>
                    <option value="fraunces">Fraunces (soft serif)</option>
                    <option value="caprasimo">Caprasimo (bold & bubbly)</option>
                    <option value="chonburi">Chonburi (retro serif)</option>
                    <option value="dm-serif">DM Serif Display (elegant)</option>
                    <option value="abril">Abril Fatface (bold display)</option>
                    <option value="bricolage">Bricolage Grotesque (modern sans)</option>
                    <option value="calistoga">Calistoga (friendly)</option>
                    <option value="varela">Varela Round (rounded sans)</option>
                    <option value="fredoka">Fredoka (playful)</option>
                    <option value="nunito">Nunito (clean sans)</option>
                </select>
            </div>
            <div class="cfl-drawer__section">
                <div class="cfl-drawer__section-title">Quick Actions</div>
                <div class="cfl-drawer__option" id="cfl-reset-settings">
                    <span class="cfl-drawer__option-label">Reset All Settings</span>
                    <span class="cfl-drawer__option-value">‚Ü∫</span>
                </div>
            </div>
        </div>
    </div>

    {% include marquee.html %}

    <header>
        <h1><a href="{{ site.baseurl }}/">CFL Wiki</a></h1>
        <nav>
            {% include nav.html type="main" %}
            <button type="button" class="cfl-nav-settings" id="cfl-nav-settings-btn" aria-label="Site settings" title="Site settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </nav>
    </header>

    {% assign toc_enabled = false %}
    {% if page.collection == 'wiki' and page.title %}
        {% assign headings_count = content | split: '<h2' | size | minus: 1 %}
        {% if page.toc != false and headings_count >= 2 %}
            {% assign toc_enabled = true %}
        {% endif %}
    {% endif %}
    {% assign api_page = false %}
    {% if page.url and page.url contains '/wiki/api-reference' %}
        {% assign api_page = true %}
    {% endif %}

    <main id="main-content"{% if toc_enabled or api_page %} class="{% if toc_enabled %}has-toc{% endif %}{% if toc_enabled and api_page %} {% endif %}{% if api_page %}api-reference{% endif %}"{% endif %}>
        {% if page.collection == 'wiki' and page.title %}
        {% include auto-breadcrumbs.html %}
        <div class="wiki-meta">
            {% include reading-time.html %}
            {% include last-updated.html %}
        </div>
        {% if toc_enabled %}
        <div class="toc-layout">
            {% include toc.html %}
            <div class="toc-content">
                {{ content }}
            </div>
        </div>
        {% else %}
            {{ content }}
        {% endif %}
        {% else %}
            {{ content }}
        {% endif %}
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-social">
                <a href="https://github.com/ChicoFabLab" class="social-link" title="GitHub" target="_blank" rel="noopener">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <a href="https://discord.gg/chicofablab" class="social-link" title="Discord" target="_blank" rel="noopener">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
                    </svg>
                </a>
            </div>
            <div class="footer-links">
                {% include nav.html type="footer" %}
            </div>
            <p>Chico Fab Lab ¬∑ 603 Orange Street ¬∑ Chico, CA</p>
            <p>Open Wednesdays 5-7pm and by arrangement</p>
            <span class="footer-badge">Built with Jekyll ¬∑ Hosted on GitHub Pages</span>
            <a href="{{ site.baseurl }}/wiki/pong" class="footer-pong-link" id="pong-easter-egg" title="Play Pong!">üèì Play Pong</a>
        </div>
    </footer>

    {% include privacy-disclaimer.html %}

    <div class="cfl-settings" id="cfl-settings" aria-live="polite">
        <div class="cfl-settings__scrim" data-scrim hidden></div>
        <button type="button" class="cfl-settings__dismiss" id="cfl-settings-dismiss" aria-label="Hide settings button" title="Hide settings widget">
            ‚úï
        </button>
        <button type="button" class="cfl-settings__fab" aria-expanded="false" aria-controls="cfl-settings-panel" aria-label="Site settings">
            <span class="cfl-settings__fab-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </span>
        </button>
        <div class="cfl-settings__orbit" aria-hidden="true">
            <button type="button" class="cfl-settings__orbit-btn" data-panel="fonts" title="Fonts">
                <span aria-hidden="true">Aa</span>
                <span class="sr-only">Fonts</span>
                <span class="cfl-settings__orbit-label">Fonts</span>
            </button>
            <button type="button" class="cfl-settings__orbit-btn" data-panel="colors" title="Colors">
                <span aria-hidden="true">üé®</span>
                <span class="sr-only">Colors</span>
                <span class="cfl-settings__orbit-label">Colors</span>
            </button>
            <button type="button" class="cfl-settings__orbit-btn" data-action="quick-font" data-font="fraunces" title="Soft serif">
                <span aria-hidden="true">ü´ß</span>
                <span class="sr-only">Soft serif</span>
                <span class="cfl-settings__orbit-label">Serif</span>
            </button>
            <button type="button" class="cfl-settings__orbit-btn" data-action="quick-font" data-font="bricolage" title="Playful sans">
                <span aria-hidden="true">‚ú®</span>
                <span class="sr-only">Playful sans</span>
                <span class="cfl-settings__orbit-label">Sans</span>
            </button>
            <button type="button" class="cfl-settings__orbit-btn" data-panel="scope" title="Scope">
                <span aria-hidden="true">üåê</span>
                <span class="sr-only">Scope</span>
                <span class="cfl-settings__orbit-label">Scope</span>
            </button>
            <button type="button" class="cfl-settings__orbit-btn" data-panel="reset" title="Reset">
                <span aria-hidden="true">‚Ü∫</span>
                <span class="sr-only">Reset</span>
                <span class="cfl-settings__orbit-label">Reset</span>
            </button>
        </div>

        <div class="cfl-settings__panel" id="cfl-settings-panel" data-panel="fonts" hidden>
            <div class="cfl-settings__panel-title">Font switcher</div>
            <label class="cfl-settings__label" for="cfl-font-select">Pick a style</label>
            <select id="cfl-font-select" class="cfl-settings__select">
                <option value="default">Default (Georgia + Inter)</option>
                <option value="fraunces">Fraunces (soft serif)</option>
                <option value="caprasimo">Caprasimo (bold & bubbly)</option>
                <option value="chonburi">Chonburi (retro serif)</option>
                <option value="dm-serif">DM Serif Display (editorial)</option>
                <option value="abril">Abril Fatface (dramatic)</option>
                <option value="bricolage">Bricolage Grotesque (playful sans)</option>
                <option value="calistoga">Calistoga (friendly retro)</option>
                <option value="varela">Varela Round (soft sans)</option>
                <option value="fredoka">Fredoka (bold rounded)</option>
                <option value="nunito">Nunito (rounded UI)</option>
            </select>
            <p class="cfl-settings__note">Headings and body will update instantly. Defaults remain Georgia/Inter if you reset.</p>
        </div>

        <div class="cfl-settings__panel" data-panel="colors" hidden>
            <div class="cfl-settings__panel-title">Color theme</div>
            <p class="cfl-settings__note">Pick an accent vibe. Applies to this device only.</p>
            <div class="cfl-settings__swatches" role="group" aria-label="Color themes">
                <button type="button" class="cfl-settings__swatch" data-theme="default">
                    <span class="cfl-settings__swatch-dot" style="--swatch-accent: #e63946; --swatch-bg: #fef9f3;"></span>
                    Default
                </button>
                <button type="button" class="cfl-settings__swatch" data-theme="teal">
                    <span class="cfl-settings__swatch-dot" style="--swatch-accent: #0f766e; --swatch-bg: #f0fdfa;"></span>
                    Teal
                </button>
                <button type="button" class="cfl-settings__swatch" data-theme="amber">
                    <span class="cfl-settings__swatch-dot" style="--swatch-accent: #d97706; --swatch-bg: #fffbeb;"></span>
                    Amber
                </button>
                <button type="button" class="cfl-settings__swatch" data-theme="plum">
                    <span class="cfl-settings__swatch-dot" style="--swatch-accent: #9333ea; --swatch-bg: #f5f3ff;"></span>
                    Plum
                </button>
            </div>
            <div class="cfl-settings__legal">Colors are applied with CSS variables only; nothing is sent or stored remotely.</div>
        </div>

        <div class="cfl-settings__panel" data-panel="scope" hidden>
            <div class="cfl-settings__panel-title">Scope</div>
            <label class="cfl-settings__label">Apply where?</label>
            <label class="cfl-toggle cfl-toggle--md cfl-settings__scope-toggle">
                <input type="checkbox" class="cfl-toggle__input" id="cfl-settings-scope">
                <span class="cfl-toggle__track">
                    <span class="cfl-toggle__thumb"></span>
                </span>
                <span class="cfl-toggle__label">Site-wide (this device)</span>
            </label>
            <p class="cfl-settings__note">Switch off for ‚ÄúThis page only‚Äù (clears when you leave). Switch on for ‚ÄúSite-wide‚Äù (saves to this browser only).</p>
            <div class="cfl-settings__legal">Settings stay local on your device (localStorage/sessionStorage). Fonts load from Google Fonts. No tracking or cookies.</div>
        </div>

        <div class="cfl-settings__panel" data-panel="reset" hidden>
            <div class="cfl-settings__panel-title">Reset & debug</div>
            <button type="button" class="cfl-btn cfl-btn--ghost cfl-btn--sm cfl-settings__reset" data-action="reset-scope">Reset current scope</button>
            <label class="cfl-toggle cfl-toggle--sm cfl-settings__debug-toggle">
                <input type="checkbox" class="cfl-toggle__input" id="cfl-settings-debug" checked>
                <span class="cfl-toggle__track">
                    <span class="cfl-toggle__thumb"></span>
                </span>
                <span class="cfl-toggle__label">Debug logging</span>
            </label>
            <p class="cfl-settings__note">Debug logs print to the console to help troubleshoot font changes and persistence.</p>
        </div>
    </div>

    <script src="{{ site.baseurl }}/assets/js/fonts.js" defer></script>
    <script src="{{ site.baseurl }}/assets/js/main.js" defer></script>
</body>
</html>
