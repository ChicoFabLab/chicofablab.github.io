<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}CFL Wiki</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    {% include marquee.html %}

    <header>
        <h1><a href="/">CFL Wiki</a></h1>
        <nav>
            {% include nav.html type="main" %}
        </nav>
    </header>

    <main>
        {{ content }}
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-social">
                <a href="https://github.com/ChicoFabLab" class="social-link" title="GitHub" target="_blank" rel="noopener">
                    âŒ˜
                </a>
                <a href="https://discord.gg/chicofablab" class="social-link" title="Discord" target="_blank" rel="noopener">
                    ðŸ’¬
                </a>
            </div>
            <div class="footer-links">
                {% include nav.html type="footer" %}
            </div>
            <p>Chico Fab Lab Â· 603 Orange Street Â· Chico, CA</p>
            <p>Open Wednesdays 5-7pm and by arrangement</p>
            <span class="footer-badge">Built with Jekyll Â· Hosted on GitHub Pages</span>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add copy buttons to code snippets
        var copyIcon = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
        var checkIcon = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>';

        document.querySelectorAll('.code-snippet__content').forEach(function(content) {
            var code = content.querySelector('code');
            if (code && !content.querySelector('.code-snippet__copy')) {
                var btn = document.createElement('button');
                btn.className = 'code-snippet__copy';
                btn.innerHTML = copyIcon + ' Copy';
                content.appendChild(btn);

                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    navigator.clipboard.writeText(code.textContent.trim()).then(function() {
                        btn.classList.add('code-snippet__copy--copied');
                        btn.innerHTML = checkIcon + ' Copied';
                        setTimeout(function() {
                            btn.classList.remove('code-snippet__copy--copied');
                            btn.innerHTML = copyIcon + ' Copy';
                        }, 2000);
                    });
                });
            }
        });

        // Search clear button functionality
        document.querySelectorAll('.cfl-search__clear').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var input = this.parentElement.querySelector('.cfl-search__input');
                if (input) {
                    input.value = '';
                    input.focus();
                    input.dispatchEvent(new Event('input', { bubbles: true }));
                }
            });
        });

        // Tabs functionality
        document.querySelectorAll('.cfl-tabs').forEach(function(tabContainer) {
            var tabs = tabContainer.querySelectorAll('.cfl-tabs__tab');
            tabs.forEach(function(tab) {
                tab.addEventListener('click', function() {
                    var targetId = this.getAttribute('data-tab');

                    // Deactivate all tabs and panels
                    tabContainer.querySelectorAll('.cfl-tabs__tab').forEach(function(t) {
                        t.classList.remove('cfl-tabs__tab--active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    tabContainer.querySelectorAll('.cfl-tabs__panel').forEach(function(p) {
                        p.classList.remove('cfl-tabs__panel--active');
                        p.setAttribute('hidden', '');
                    });

                    // Activate clicked tab and its panel
                    this.classList.add('cfl-tabs__tab--active');
                    this.setAttribute('aria-selected', 'true');
                    var panel = tabContainer.querySelector('[data-panel="' + targetId + '"]');
                    if (panel) {
                        panel.classList.add('cfl-tabs__panel--active');
                        panel.removeAttribute('hidden');
                    }
                });
            });
        });
    });
    </script>
</body>
</html>
