---
title: "Open Graph URL Fix - Share Preview Issue"
status: "completed"
created: "2025-12-21T13:15:00-08:00"
last_updated: "2025-12-21T21:49:53.151Z"
pr_number: 10
---

# Work Effort: Open Graph URL Fix - Share Preview Issue

## Objective
Fix the issue where sharing the chicofl.org website link shows "localhost:4000" in the preview banner on recipient devices, making the link unclickable.

## Problem Statement

**Reported Issue:**
When sharing the live site (chicofl.org) from Google Chrome's share button on iPhone to an Android device:
- ❌ Preview banner shows "localhost:4000" instead of "chicofl.org"
- ❌ Link is not clickable on recipient's device
- ❌ Share preview metadata incorrect

**User Impact:**
- Site cannot be effectively shared via mobile
- Recipients cannot access the site from shared links
- Poor UX and broken sharing flow

## Root Cause Analysis

### Investigation Steps
1. Checked `_config.yml` for URL configuration
2. Examined `_includes/seo.html` for Open Graph tag generation
3. Verified `jekyll-seo-tag` plugin usage

### Root Cause Identified
**File:** `_config.yml` (line 7)

```yaml
# BEFORE (incorrect)
url: "http://localhost:4000"
```

This development URL was being used by:
1. **Custom SEO include** (`_includes/seo.html`) - Generates all `og:*` meta tags
2. **Jekyll SEO Tag plugin** - Additional SEO metadata
3. **Sitemap plugin** - URL generation

### Affected Meta Tags
All pages were rendering with incorrect URLs:
```html
<meta property="og:url" content="http://localhost:4000/...">
<meta property="og:image" content="http://localhost:4000/assets/img/...">
<link rel="canonical" href="http://localhost:4000/...">
```

## Solution

### Fix Applied
**File:** `_config.yml` (line 7)

```yaml
# AFTER (correct)
url: "https://chicofl.org"
```

### Files Modified
| File | Change |
|------|--------|
| `_config.yml` | Changed `url` from `http://localhost:4000` to `https://chicofl.org` |

### Deployment
- **Commit:** `fd2a778` - "fix: set production URL for Open Graph sharing previews"
- **PR:** #10 to ChicoFabLab/chicofablab.github.io
- **Status:** Awaiting merge

## Tasks
- [x] Identify root cause of incorrect share previews
- [x] Locate URL configuration in `_config.yml`
- [x] Verify SEO include usage of `site.url`
- [x] Update URL to production domain
- [x] Commit fix to fork
- [x] Create PR to upstream repository
- [ ] Merge PR #10
- [ ] Verify deployment on GitHub Pages
- [ ] Test share preview on mobile

## Expected Results vs Actual Results

### Before Fix
| Aspect | Expected | Actual |
|--------|----------|--------|
| `og:url` | `https://chicofl.org/...` | ❌ `http://localhost:4000/...` |
| `og:image` | `https://chicofl.org/assets/img/...` | ❌ `http://localhost:4000/assets/img/...` |
| `canonical` | `https://chicofl.org/...` | ❌ `http://localhost:4000/...` |
| Share preview | Shows "chicofl.org" | ❌ Shows "localhost:4000" |
| Link clickable | Yes | ❌ No |

### After Fix (Expected)
| Aspect | Expected | Status |
|--------|----------|--------|
| `og:url` | `https://chicofl.org/...` | ⏳ Pending deployment |
| `og:image` | `https://chicofl.org/assets/img/...` | ⏳ Pending deployment |
| `canonical` | `https://chicofl.org/...` | ⏳ Pending deployment |
| Share preview | Shows "chicofl.org" | ⏳ Pending verification |
| Link clickable | Yes | ⏳ Pending verification |

## Verification Commands

```bash
# Check deployed meta tags
curl -s https://chicofl.org/ | grep -E "(og:url|canonical)"

# Expected output after deployment:
# <meta property="og:url" content="https://chicofl.org/">
# <link rel="canonical" href="https://chicofl.org/">
```

## Technical Context

### SEO Include Structure
The custom `_includes/seo.html` generates Open Graph tags:

```liquid
{% comment %} Get page URL {% endcomment %}
{% if page.url %}
  {% assign page_url = page.url | prepend: site.url | prepend: site.baseurl %}
{% else %}
  {% assign page_url = site.url | append: site.baseurl %}
{% endif %}

<meta property="og:url" content="{{ page_url }}">
<link rel="canonical" href="{{ page_url }}">
```

All URL generation depends on `site.url` from `_config.yml`.

### Repository Structure
```
ChicoFabLab/chicofablab.github.io (upstream) ← Live site deploys here
    ↑
    | PR #10
    |
ctavolazzi/chicofablab.github.io (fork) ← Fix committed here
```

## Lessons Learned
1. **Development vs Production URLs** - Always verify `_config.yml` URL settings before deployment
2. **Fork vs Upstream** - Changes to fork don't automatically deploy; PRs needed for upstream
3. **Open Graph debugging** - Use `curl | grep og:` to verify meta tags without browser caching

## Progress Log
- **2025-12-21 13:15 PST** - Issue reported: share preview showing localhost:4000
- **2025-12-21 13:18 PST** - Root cause identified: `_config.yml` URL misconfigured
- **2025-12-21 13:20 PST** - Fix applied: changed URL to https://chicofl.org
- **2025-12-21 13:22 PST** - Committed to fork
- **2025-12-21 13:25 PST** - Discovered fix on fork only, not upstream
- **2025-12-21 13:28 PST** - Created PR #10 to upstream repository

## Next Steps
1. Merge PR #10 (requires repo admin)
2. Wait for GitHub Pages rebuild (~1-2 minutes)
3. Verify fix with curl command
4. Test sharing from mobile
5. Note: Some apps cache link previews; may need to wait for cache expiration

## Related Documents
- [[10.06_20251220_codebase_modularization_seo_enhancements]] - SEO include was created in this work effort
- [[../../../_includes/seo.html]] - Custom SEO meta tag generator
- [[../../../_config.yml]] - Jekyll site configuration

## References
- [Open Graph Protocol](https://ogp.me/)
- [Jekyll SEO Tag](https://github.com/jekyll/jekyll-seo-tag)
- PR #10: https://github.com/ChicoFabLab/chicofablab.github.io/pull/10
